<div class="row" ng-controller="CabinetsController" ng-init="cartInit()">
	<h4>Your Shopping Cart</h4>
	<table class="table table-hover">
		<thead>
			<th>Name</th>
			<th>Category</th>
			<th>Door</th>
			<th>Color</th>
			<th>Material</th>
			<th>Width</th>
			<th>Height</th>
			<th>Depth</th>
			<th>Kick Border</th>
			<th>Count</th>
			<th>Price</th>
		</thead>
		<tbody>
			<tr ng-repeat="cabinet in cartArr">
				<td>{{cabinet.name}}</td>
				<td>{{getCategory(cabinet.category).name}}</td>
				<td>{{cabinet.door.name}}</td>
				<td ng-init="editColor = false">
					<span ng-hide="editColor">{{cabinet.color.name}}</span>
					<select ng-model="cabinet.color" ng-options="color.name for color in cabinetColorsArr" ng-show="editColor" my-enter="cartArr.$save(cabinet); editColor = false" ng-model="cabinet.color"></select>
					<span style="cursor:pointer" class="glyphicon glyphicon-pencil" ng-click="editColor = !editCount"></span>
				</td>
				<td>{{cabinet.material.name}}</td>
				<td>{{cabinet.width}}, {{cabinet.widthFraction.name}}</td>
				<td>{{cabinet.height}}, {{cabinet.heightFraction.name}}</td>
				<td>{{cabinet.depth}}, {{cabinet.depthFraction.name}}</td>
				<td>{{cabinet.kick}}</td>
				<td ng-init="editCount = false">
					<span ng-hide="editCount">{{cabinet.count}}</span>
					<input style="width:50px" ng-show="editCount" my-enter="cartArr.$save(cabinet); editCount = false" type="number" ng-model="cabinet.count">
					<span style="cursor:pointer" class="glyphicon glyphicon-pencil" ng-click="editCount = !editCount"></span>
				</td>
				<td>{{cabinet.price | currency}}</td>
				<td>
					<button type="button" class="btn btn-danger" data-toggle="modal" data-target=".{{cabinet.$id}}-trash-modal">
						<span class="glyphicon glyphicon-trash"></span>
					</button>
					<div class="modal fade colors-modal {{cabinet.$id}}-trash-modal">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
									<h4 class="modal-title">You're about to remove cabinet: {{cabinet.name}} from your Cart</h4>
								</div>
								<div class="modal-body">
									<h5>Are you sure?</h5>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">Nevermind</button>
									<button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="removeFromCart(cabinet)">Yes, remove this Cabinet</button>
								</div>
							</div>
							<!-- /.modal-content -->
						</div>
						<!-- /.modal-dialog -->
					</div>
					<!-- /.modal -->
				</td>
			</tr>
			<tr>
				<td colspan="9">
					<h2 class="pull-right">Total: {{cartPrice() | currency}} </h2>
				</td>
			</tr>
		</tbody>
	</table>
	<button class="btn btn-primary pull-right purchase-btn" ui-sref="checkout"> Complete Purchase <span class="glyphicon glyphicon-chevron-right"></span></button>
	<button class="btn btn-primary pull-right pay-btn" ng-click="purchase()"> Pay <span class="glyphicon glyphicon-chevron-right"></span></button>
</div>
